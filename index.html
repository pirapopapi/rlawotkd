<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>블랙잭 변형 게임</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #2f4f4f;
            color: white;
        }
        .game-container {
            margin-top: 50px;
        }
        .card-container {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .card {
            width: 60px;
            height: 90px;
            line-height: 90px;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            border-radius: 8px;
            border: 2px solid white;
            background-color: white;
            color: black;
        }
        .hidden-card {
            background-color: gray;
            color: gray;
        }
        .buttons button {
            margin: 10px;
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .hit-btn { background-color: #28a745; color: white; }
        .stand-btn { background-color: #ffc107; color: black; }
        .restart-btn { background-color: #dc3545; color: white; }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>블랙잭 변형 게임</h1>
        <p>초기 자금: <span id="money">100</span> 달러</p>
        <p>배팅 금액: <input type="number" id="bet" min="1" value="10"></p>
        <button onclick="startGame()">배팅 후 시작</button>
        
        <div>
            <h2>당신의 카드</h2>
            <div class="card-container" id="player-cards"></div>
            <p>점수: <span id="player-score">0</span></p>
        </div>
        <div>
            <h2>딜러의 카드</h2>
            <div class="card-container" id="dealer-cards"></div>
            <p>점수: <span id="dealer-score">?</span></p>
        </div>
        <div class="buttons">
            <button class="hit-btn" onclick="hit()" disabled>Hit</button>
            <button class="stand-btn" onclick="stand()" disabled>Stand</button>
            <button class="restart-btn" onclick="restartGame()">Restart</button>
        </div>
        <p id="result"></p>
    </div>
    
    <script>
        let money = 100;
        let deck = [];
        let playerHand = [];
        let dealerHand = [];
        
        function createDeck() {
            const suits = ['♠️', '♥️', '♦️', '♣️'];
            const ranks = {'2': 2, '3': 3, '4': 4, '5': 5, '6': 6, '7': 7, '8': 8, '9': 9, '10': 10, 'J': 10, 'Q': 10, 'K': 10, 'A': 11};
            let newDeck = [];
            for (let suit of suits) {
                for (let rank in ranks) {
                    newDeck.push({rank, suit, value: ranks[rank]});
                }
            }
            return newDeck.sort(() => Math.random() - 0.5);
        }
        
        function calculateScore(hand) {
            let score = hand.reduce((sum, card) => sum + card.value, 0);
            let aceCount = hand.filter(card => card.rank === 'A').length;
            while (score > 21 && aceCount > 0) {
                score -= 10;
                aceCount--;
            }
            return score;
        }
        
        function updateUI(revealDealer = false) {
            document.getElementById("player-cards").innerHTML = playerHand.map(card => `<div class='card'>${card.rank}${card.suit}</div>`).join('');
            document.getElementById("dealer-cards").innerHTML = `<div class='card'>${dealerHand[0].rank}${dealerHand[0].suit}</div>` + 
                (revealDealer ? dealerHand.slice(1).map(card => `<div class='card'>${card.rank}${card.suit}</div>`).join('') 
                : `<div class='card hidden-card'>?</div>`);
            document.getElementById("player-score").textContent = calculateScore(playerHand);
            document.getElementById("dealer-score").textContent = revealDealer ? calculateScore(dealerHand) : "?";
            document.getElementById("money").textContent = money;
            if (money <= 0) {
                document.getElementById("result").textContent = "파산! 더 이상 플레이할 수 없습니다.";
                disableGame();
            }
        }
        
        function startGame() {
            if (money <= 0) return;
            deck = createDeck();
            playerHand = [deck.pop(), deck.pop()];
            dealerHand = [deck.pop(), deck.pop()];
            document.getElementById("result").textContent = "";
            document.querySelector(".hit-btn").disabled = false;
            document.querySelector(".stand-btn").disabled = false;
            updateUI();
        }
        
        function hit() {
            playerHand.push(deck.pop());
            updateUI();
            if (calculateScore(playerHand) > 21) {
                document.getElementById("result").textContent = "버스트! 당신이 졌습니다.";
                money -= parseInt(document.getElementById("bet").value);
                disableGame();
            }
        }
        
        function stand() {
            while (calculateScore(dealerHand) < 17 && calculateScore(dealerHand) < calculateScore(playerHand)) {
                dealerHand.push(deck.pop());
            }
            updateUI(true);
            let playerScore = calculateScore(playerHand);
            let dealerScore = calculateScore(dealerHand);
            if (dealerScore > 21 || playerScore > dealerScore) {
                document.getElementById("result").textContent = "당신이 승리했습니다!";
                money += parseInt(document.getElementById("bet").value) * 1.5;
            } else if (playerScore === dealerScore) {
                document.getElementById("result").textContent = "무승부!";
            } else {
                document.getElementById("result").textContent = "딜러가 승리했습니다.";
                money -= parseInt(document.getElementById("bet").value);
            }
            disableGame();
        }
        
        function disableGame() {
            document.querySelector(".hit-btn").disabled = true;
            document.querySelector(".stand-btn").disabled = true;
        }
    </script>
</body>
</html>
